services:
  web:
    type: web
    name: fastapi-app
    env: python
    plan: free
    buildCommand: "pip install -r requirements.txt"
    startCommand: "gunicorn main:app -w 4 -k uvicorn.workers.UvicornWorker --bind 0.0.0.0:3000"
    envVars:
      DATABASE_URL: ${DATABASE_URL}
      SECRET_KEY: ${SECRET_KEY}
      JWT_SECRET: ${JWT_SECRET}
    autoDeploy: true
    healthCheckPath: "/"
    healthCheckInterval: 30000
    healthCheckTimeout: 5000
    healthCheckRetries: 3
    healthCheckSuccessThreshold: 1
    healthCheckFailureThreshold: 3